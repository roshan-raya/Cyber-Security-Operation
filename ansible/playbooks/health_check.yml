---
# Sprint 2: Health check - SSH connectivity, uptime, sshd service
- hosts: patch_targets
  tasks:
    - name: Ping (connection check)
      ansible.builtin.ping:

    - name: Check system uptime
      ansible.builtin.command: uptime
      register: uptime_out
      changed_when: false

    - name: Display uptime
      ansible.builtin.debug:
        var: uptime_out.stdout

    - name: Ensure ssh service is active
      ansible.builtin.service:
        name: ssh
        state: started
      register: ssh_svc

    - name: Health check summary
      ansible.builtin.debug:
        msg: "{{ inventory_hostname }}: SSH OK, uptime OK, sshd active"
